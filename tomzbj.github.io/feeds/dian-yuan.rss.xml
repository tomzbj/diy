<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>兰湾 - 电源</title><link href="http://st.avros.net/" rel="alternate"></link><link href="http://st.avros.net/feeds/dian-yuan.rss.xml" rel="self"></link><id>http://st.avros.net/</id><updated>2015-08-09T00:00:00+08:00</updated><entry><title>学习了一下散热片的简单估算</title><link href="http://st.avros.net/articles/heatsink-calc.html" rel="alternate"></link><published>2015-08-09T00:00:00+08:00</published><updated>2015-08-09T00:00:00+08:00</updated><author><name>Stavros</name></author><id>tag:st.avros.net,2015-08-09:/articles/heatsink-calc.html</id><summary type="html">&lt;p&gt;常用的板翅式散热器，其有效散热面积为：$$散热面积=(翅片高度\times2\times翅片数量+基板宽度)\times截断长度$$&lt;/p&gt;
&lt;p&gt;有效散热面积和热阻的关系：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;A(cm&lt;sub&gt;2&lt;/sub&gt;)&lt;/th&gt;
&lt;th&gt;R&lt;sub&gt;sa&lt;/sub&gt;(K/W)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;500&lt;/td&gt;
&lt;td&gt;2.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;250&lt;/td&gt;
&lt;td&gt;2.9&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;100&lt;/td&gt;
&lt;td&gt;4.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;50&lt;/td&gt;
&lt;td&gt;5.2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;25&lt;/td&gt;
&lt;td&gt;6.5&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;简单拟合得:$$R_\mathrm{sa}=23.3A^{-0.39}$$&lt;/p&gt;
&lt;p&gt;总热阻$$R_\mathrm{tot}=R_\mathrm{sa}+R_\mathrm{cs}+R_ …&lt;/p&gt;</summary><content type="html">&lt;p&gt;常用的板翅式散热器，其有效散热面积为：$$散热面积=(翅片高度\times2\times翅片数量+基板宽度)\times截断长度$$&lt;/p&gt;
&lt;p&gt;有效散热面积和热阻的关系：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;A(cm&lt;sub&gt;2&lt;/sub&gt;)&lt;/th&gt;
&lt;th&gt;R&lt;sub&gt;sa&lt;/sub&gt;(K/W)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;500&lt;/td&gt;
&lt;td&gt;2.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;250&lt;/td&gt;
&lt;td&gt;2.9&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;100&lt;/td&gt;
&lt;td&gt;4.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;50&lt;/td&gt;
&lt;td&gt;5.2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;25&lt;/td&gt;
&lt;td&gt;6.5&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;简单拟合得:$$R_\mathrm{sa}=23.3A^{-0.39}$$&lt;/p&gt;
&lt;p&gt;总热阻$$R_\mathrm{tot}=R_\mathrm{sa}+R_\mathrm{cs}+R_\mathrm{jc}$$&lt;/p&gt;
&lt;p&gt;注：R&lt;sub&gt;sa&lt;/sub&gt;为散热片向空气散热的热阻。
R&lt;sub&gt;cs&lt;/sub&gt;为器件和散热器的接触热阻，通过导热硅脂接触的取0.1~0.2K/W，加绝缘垫的取1K/W。
R&lt;sub&gt;jc&lt;/sub&gt;为器件内部热阻，见器件datasheet。&lt;/p&gt;
&lt;p&gt;散热能力$$P=\frac{T_\mathrm j-T_\mathrm a}{R_\mathrm{tot}}$$。T&lt;sub&gt;j&lt;/sub&gt;为器件的允许工作结温，T&lt;sub&gt;a&lt;/sub&gt;为环境温度。&lt;/p&gt;
&lt;p&gt;举例：一个宽50mm，翅片高10mm，8片翅片，截断长度为35mm的散热片，
其有效散热面积为$$(10\mathrm{mm}\times2\times8+50\mathrm{mm})\times35\mathrm{mm}=73.5\mathrm{cm}^2$$&lt;/p&gt;
&lt;p&gt;按上面的公式，
$$R_\mathrm{sa}=23.3\times73.5^{-0.39}=4.36\mathrm{K/W}$$&lt;/p&gt;
&lt;p&gt;给TOP3封装的BTA41散热，用硅脂接触，取
$$R_\mathrm{cs}=0.2\mathrm{K/W}$$&lt;/p&gt;
&lt;p&gt;根据BTA41的datasheet，内部热阻
$$R_\mathrm{jc}=0.9\mathrm{K/W}$$&lt;/p&gt;
&lt;p&gt;因此总热阻为5.46K/W。&lt;/p&gt;
&lt;p&gt;BTA41的最大允许结温T&lt;sub&gt;j&lt;/sub&gt;125°C，环境温度取40°C，则有$$P=\frac{125^\circ \mathrm{C}-40^\circ \mathrm{C}}{5.46\mathrm{K/W}}=15.6\mathrm{W}$$&lt;/p&gt;
&lt;p&gt;查BTA41 datasheet里的P-I&lt;sub&gt;RMS&lt;/sub&gt;曲线可得此时允许通过的交流电流有效值为16A左右。&lt;/p&gt;</content></entry><entry><title>迷你智能电源</title><link href="http://st.avros.net/articles/cute_power_v2.html" rel="alternate"></link><published>2015-07-14T00:00:00+08:00</published><updated>2015-07-14T00:00:00+08:00</updated><author><name>Stavros</name></author><id>tag:st.avros.net,2015-07-14:/articles/cute_power_v2.html</id><summary type="html">&lt;p&gt;做了个简单的小电源，用一节18650供电，可以输出1.26V、1.8V、2.5V、2.85V、3.3V、5.0V和6.0V，共7种电压，可以通过USB给18650充电，如图：&lt;/p&gt;
&lt;p&gt;&lt;a href="/images2/2015/cute_power_v2.jpg" title="实物图"&gt;&lt;img src="/images2/2015/cute_power_v2.jpg" width="480px" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;原理图：&lt;/p&gt;
&lt;p&gt;&lt;a href="/images2/2015/cute_power_v2.png" title="原理图"&gt;&lt;img src="/images2/2015/cute_power_v2.png" width="480px" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;充电使用TP4056，充电电流为1200/1.5k = 800mA。LM3478接成SEPIC电路，既能升压也能降压。单片机ATtiny13输出一路PWM信号，经滤波后控制LM3478的反馈端，从而控制输出电压。三只LED用于指示输出电压。&lt;/p&gt;
&lt;p&gt;源程序：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;avr/io.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;avr/interrupt.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;util/delay.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;avr/sleep.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;misc.h …&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;做了个简单的小电源，用一节18650供电，可以输出1.26V、1.8V、2.5V、2.85V、3.3V、5.0V和6.0V，共7种电压，可以通过USB给18650充电，如图：&lt;/p&gt;
&lt;p&gt;&lt;a href="/images2/2015/cute_power_v2.jpg" title="实物图"&gt;&lt;img src="/images2/2015/cute_power_v2.jpg" width="480px" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;原理图：&lt;/p&gt;
&lt;p&gt;&lt;a href="/images2/2015/cute_power_v2.png" title="原理图"&gt;&lt;img src="/images2/2015/cute_power_v2.png" width="480px" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;充电使用TP4056，充电电流为1200/1.5k = 800mA。LM3478接成SEPIC电路，既能升压也能降压。单片机ATtiny13输出一路PWM信号，经滤波后控制LM3478的反馈端，从而控制输出电压。三只LED用于指示输出电压。&lt;/p&gt;
&lt;p&gt;源程序：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;avr/io.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;avr/interrupt.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;util/delay.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;avr/sleep.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;misc.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="n"&gt;vu8&lt;/span&gt; &lt;span class="n"&gt;g_status&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;vu32&lt;/span&gt; &lt;span class="n"&gt;g_key&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="c1"&gt;// 0, 1.2x, 1.8, 2.5, 2.85, 3.3, 5.0, 6.0&lt;/span&gt;
&lt;span class="n"&gt;vu8&lt;/span&gt; &lt;span class="n"&gt;g_pwm&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;105&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;90&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;77&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;70&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;62&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;29&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;    &lt;span class="c1"&gt;// 8种状态下的PWM值&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;port_init&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0x0e&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;DDRB&lt;/span&gt;  &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0x1f&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;               &lt;span class="c1"&gt;// PB0~4作为输出&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;timer0_init&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;TCCR0B&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;TCCR0A&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0x83&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;              &lt;span class="c1"&gt;// 快速PWM，1分频&lt;/span&gt;
    &lt;span class="n"&gt;TCCR0B&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0x01&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;              &lt;span class="c1"&gt;// 启动定时器&lt;/span&gt;
    &lt;span class="n"&gt;TIMSK0&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TOIE0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;ISR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIM0_OVF_vect&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// 读键&lt;/span&gt;
    &lt;span class="n"&gt;u8&lt;/span&gt; &lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;g_key&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;tmp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PB3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PB3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;DDRB&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PB3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PINB&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PB3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;g_key&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;
        &lt;span class="n"&gt;g_key&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;DDRB&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PB3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;                 &lt;span class="c1"&gt;// 恢复PB3的旧状态&lt;/span&gt;
        &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PB3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;
        &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PB3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;g_key&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0xffffffff&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mh"&gt;0xffffff00&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;  &lt;span class="c1"&gt;// 判断按键&lt;/span&gt;
        &lt;span class="n"&gt;g_status&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;g_status&lt;/span&gt; &lt;span class="o"&gt;%=&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;OCR0A&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;g_pwm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;g_status&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;g_status&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;   &lt;span class="c1"&gt;// 状态0时调慢主频，省电&lt;/span&gt;
            &lt;span class="n"&gt;CLKPR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;CLKPR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0x08&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;    
            &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PB4&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;CLKPR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;CLKPR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0x03&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;       &lt;span class="c1"&gt;// 正常状态为8分频，9.6M / 8 = 1.2M&lt;/span&gt;
            &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PB4&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; 
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;init_devices&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;port_init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;timer0_init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;set_sleep_mode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SLEEP_MODE_IDLE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;sleep_enable&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;CLKPR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;CLKPR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0x08&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;ACSR&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ACD&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;           &lt;span class="c1"&gt;// 关闭模拟比较器，也是为了省电 &lt;/span&gt;
    &lt;span class="n"&gt;sei&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

    &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PB4&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;         &lt;span class="c1"&gt;// 禁用LM3478&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;init_devices&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

    &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0xf1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;g_status&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x0e&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// LED输出&lt;/span&gt;
        &lt;span class="n"&gt;sleep_cpu&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content></entry><entry><title>带负载指示的USB一拖三充电器</title><link href="http://st.avros.net/articles/usb_3x_charger.html" rel="alternate"></link><published>2015-01-17T00:00:00+08:00</published><updated>2015-01-17T00:00:00+08:00</updated><author><name>Stavros</name></author><id>tag:st.avros.net,2015-01-17:/articles/usb_3x_charger.html</id><summary type="html">&lt;p&gt;现在平板/手机之类一般都用USB充电了. 晚上睡觉前, 经常得两三个设备一起充电, 插座都不够用了. 如果能在一个充电器上做出几个USB口同时给它们充电, 岂不是很方便?&lt;/p&gt;
&lt;p&gt;不过这么一来, 供电就比较成问题了. 现在的设备一般都需要1A以上的充电电流, 有的需要2A. 3个2A一起充就得6A, 4个就得8A. 前面如果用12V降压到5V, 80%效率的话, 5V 6A需要提供12V 3.2A, 5V 8A需要提供12V 4.2A. 能提供这么大电流的12V适配器倒是有, 但是不太便携了. 所以还是折衷一下, 输出4A电流, 这样前面用12V 2A的适配器, 勉强够用. 这样就不能同时充3个2A的设备了, 免得一不小心就冒烟. 安全起见, 最好是再加个负载指示, 随时知道输出多大电流.&lt;/p&gt;
&lt;p&gt;电路如图, 从12V降压到5V, 用了AOSMD的AOZ1014. 这颗SOIC8的小芯片能提供最大5A的输出电流, 不过感觉不怎么踏实, 4A保险些. 输出电压用8.2k和1.5k电阻设定为0.8V * (8.2+1.5 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;现在平板/手机之类一般都用USB充电了. 晚上睡觉前, 经常得两三个设备一起充电, 插座都不够用了. 如果能在一个充电器上做出几个USB口同时给它们充电, 岂不是很方便?&lt;/p&gt;
&lt;p&gt;不过这么一来, 供电就比较成问题了. 现在的设备一般都需要1A以上的充电电流, 有的需要2A. 3个2A一起充就得6A, 4个就得8A. 前面如果用12V降压到5V, 80%效率的话, 5V 6A需要提供12V 3.2A, 5V 8A需要提供12V 4.2A. 能提供这么大电流的12V适配器倒是有, 但是不太便携了. 所以还是折衷一下, 输出4A电流, 这样前面用12V 2A的适配器, 勉强够用. 这样就不能同时充3个2A的设备了, 免得一不小心就冒烟. 安全起见, 最好是再加个负载指示, 随时知道输出多大电流.&lt;/p&gt;
&lt;p&gt;电路如图, 从12V降压到5V, 用了AOSMD的AOZ1014. 这颗SOIC8的小芯片能提供最大5A的输出电流, 不过感觉不怎么踏实, 4A保险些. 输出电压用8.2k和1.5k电阻设定为0.8V * (8.2+1.5)/1.5 = 5.17V, 比标准的5V高出3.5%, 还算安全. 在输出端和USB充电口之间再串联0.025欧的电阻用作电流取样. 当输出1A时, 这个电阻上的压降为25mV, 4A时为100mV.&lt;/p&gt;
&lt;p&gt;用LM358的其中一个运放接成差分放大器, 把取样电阻上的电压放大20倍左右. 另一只运放提供约0.73V的参考电压, 因为LM358按单电源方式工作时, 最低输出电压不能到0V, 至少要0.6V左右, 所以这里把它的输出电压"抬"高一些.&lt;/p&gt;
&lt;p&gt;&lt;a href="/images/usb_3x_charger.png" title="电路图"&gt;&lt;img src="/images/usb_3x_charger.png" width="500px" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;单片机供电用了XC6206, 结果一通电, 马上冒烟了... 原来XC6206的供电电压最高只能是5V. 没办法, 先凑和一下, 把单片机的VCC改接到输出的5V上. 下次这里还是得换成AMS1117之类.&lt;/p&gt;
&lt;p&gt;单片机用的是ATMEGA48. 用ADC6来读取LM358的输出电压. 负载指示用的是10位LED光条, 用MEGA48的PD0~PD7再加上PB0, PB1, 够了. 每格表示约0.4A电流, 10格一共4A. 程序很简单, 主要部分:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;while(1) {
    u16 data, p;
    float volt, curr;
    u8 i;
    data = get_adc();
    volt = data/256.0*5.0;
    curr = volt*2.01-1.63;

    i = curr / 0.4;
    if(i&amp;amp;gt;10)
        i=10;
    p = 0x3ff &amp;amp;gt;&amp;amp;gt; (10-i);
    PORTD = p &amp;amp;amp; 0xff;
    PORTB = p &amp;amp;gt;&amp;amp;gt; 8;

    _delay_ms(500);
}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;来两张效果图:&lt;/p&gt;
&lt;p&gt;输出电流约1.6A时, 亮4格:&lt;/p&gt;
&lt;p&gt;&lt;a href="/images/dc_tube_power_4.jpg" title="4格, 负载电流约1.6A"&gt;&lt;img src="/images/dc_tube_power_4.jpg" width="500px" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;输出电流约2.8A时, 亮7格:&lt;/p&gt;
&lt;p&gt;&lt;a href="/images/dc_tube_power_7.jpg" title="7格, 负载电流约2.8A"&gt;&lt;img src="/images/dc_tube_power_7.jpg" width="500px" /&gt;&lt;/a&gt;&lt;/p&gt;</content></entry><entry><title>直流电子管电源</title><link href="http://st.avros.net/articles/dc_tube_power.html" rel="alternate"></link><published>2015-01-16T00:00:00+08:00</published><updated>2015-01-16T00:00:00+08:00</updated><author><name>Stavros</name></author><id>tag:st.avros.net,2015-01-16:/articles/dc_tube_power.html</id><summary type="html">&lt;p&gt;玩直流管, 供电是个大麻烦. 甲电还好办, 一节电池搞定; 乙电一般需要60~90V, 要么从市电变压整流再滤波, 要么就DC-DC升压; boost升压还不行, 得和甲电隔离才行, 不然玩2P2之类需要栅偏压的管子就麻烦了, 因此只能用flyback或者推挽的方式.&lt;/p&gt;
&lt;p&gt;电路如图, CD4047接成多谐振荡器, 由两只74AHC1G00推动AO4800, AO4800的两只NMOS以推挽方式工作.&lt;/p&gt;
&lt;p&gt;&lt;a href="/images/dc_tube_power.png" title="电路图"&gt;&lt;img src="/images/dc_tube_power.png" width="500px" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;变压器的参数是... 忘了, 只好用LC表测量各绕组电感量, 初级分别是659uH和666uH, 次级则是188mH+188mH. 由此可算出匝数比是1:17. 按这个匝数比, 两个次级绕组串联, 锂电池电压从4.2V降落到3.5V时, 理论输出电压应该是118V~142V. 这个变压器不大, 线径很细, 内阻不小, 因此输出电压不会这么高, 给直流电子管供电还算合适.&lt;/p&gt;
&lt;p&gt;AMS1117-ADJ提供甲电. 1117要求5~10mA的最小负载电流, 否则空载输出电压会偏高. 这里应该给它加个几百欧的电阻作为负载. 不是大问题, 算了吧.&lt;/p&gt;
&lt;p&gt;用ATTiny13的ADC实现了简单的电池电量检测, 由红绿双色LED显示. 电池电压在4.0V以上时, LED显示绿色; 3.7V …&lt;/p&gt;</summary><content type="html">&lt;p&gt;玩直流管, 供电是个大麻烦. 甲电还好办, 一节电池搞定; 乙电一般需要60~90V, 要么从市电变压整流再滤波, 要么就DC-DC升压; boost升压还不行, 得和甲电隔离才行, 不然玩2P2之类需要栅偏压的管子就麻烦了, 因此只能用flyback或者推挽的方式.&lt;/p&gt;
&lt;p&gt;电路如图, CD4047接成多谐振荡器, 由两只74AHC1G00推动AO4800, AO4800的两只NMOS以推挽方式工作.&lt;/p&gt;
&lt;p&gt;&lt;a href="/images/dc_tube_power.png" title="电路图"&gt;&lt;img src="/images/dc_tube_power.png" width="500px" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;变压器的参数是... 忘了, 只好用LC表测量各绕组电感量, 初级分别是659uH和666uH, 次级则是188mH+188mH. 由此可算出匝数比是1:17. 按这个匝数比, 两个次级绕组串联, 锂电池电压从4.2V降落到3.5V时, 理论输出电压应该是118V~142V. 这个变压器不大, 线径很细, 内阻不小, 因此输出电压不会这么高, 给直流电子管供电还算合适.&lt;/p&gt;
&lt;p&gt;AMS1117-ADJ提供甲电. 1117要求5~10mA的最小负载电流, 否则空载输出电压会偏高. 这里应该给它加个几百欧的电阻作为负载. 不是大问题, 算了吧.&lt;/p&gt;
&lt;p&gt;用ATTiny13的ADC实现了简单的电池电量检测, 由红绿双色LED显示. 电池电压在4.0V以上时, LED显示绿色; 3.7V~4.0V, 橙色; 3.5~3.7V, 红色; 3.5V以下, 红色闪烁. 程序很简单就不贴了.  &lt;/p&gt;
&lt;p&gt;分别用220V 3W节能灯泡和5W白炽灯泡测试的结果, 前者作为负载时, 输入5V 0.5A, 输出达到71V 27mA, 效率有77%; 后者当输入电压从4.2V降到3.3V时, 输出电压/电流从45.8V/52mA变化到34.0V/47mA, 效率约为56%. 考虑到一般直流电子管的屏流都在5mA以下, 几个电子管的组合估计也不会超过20mA, 这个结果还算满意.&lt;/p&gt;</content></entry><entry><title>迷你电源</title><link href="http://st.avros.net/articles/mini_power.html" rel="alternate"></link><published>2013-09-10T00:00:00+08:00</published><updated>2013-09-10T00:00:00+08:00</updated><author><name>Stavros</name></author><id>tag:st.avros.net,2013-09-10:/articles/mini_power.html</id><summary type="html">&lt;p&gt;用一节锂电boost升压到5V, 后面接LDO, 用MCU的PWM输出一个电压信号给LDO的ADJ脚, 实现了可调输出. 同时用LCD显示输出电压电流和电池电压. 不过效率似乎低了点, 一节锂电用不了多久. 下次试试把LDO换成buck降压芯片.&lt;/p&gt;</summary><content type="html">&lt;p&gt;用一节锂电boost升压到5V, 后面接LDO, 用MCU的PWM输出一个电压信号给LDO的ADJ脚, 实现了可调输出. 同时用LCD显示输出电压电流和电池电压. 不过效率似乎低了点, 一节锂电用不了多久. 下次试试把LDO换成buck降压芯片.&lt;/p&gt;</content></entry><entry><title>NE555升压实验_3</title><link href="http://st.avros.net/articles/ne555_boost_3.html" rel="alternate"></link><published>2013-04-22T00:00:00+08:00</published><updated>2013-04-22T00:00:00+08:00</updated><author><name>Stavros</name></author><id>tag:st.avros.net,2013-04-22:/articles/ne555_boost_3.html</id><summary type="html">&lt;p&gt;之前试验各种升压电路的结论是, 要想实现从单节锂电升压到5V或更高、大电流输出, PWM ic必须具有以下几个性能: &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;工作电压足够低, 一般锂电终止放电电压定在3.0V上下, 因此PWM ic的最低工作电压最好是2.7V或者更低; &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;必须是推挽输出, 否则输出电流不够, MOS开关管要么不能完全导通, 要么不能完全关断, 两种情况都严重影响效率; &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;之前的实验里, NE555在5V升6.3V时表现良好, 但它的最低工作电压只能到4.5V, 不符合上述条件1. 于是想到能否用自举电路或者用7660倍压给NE555供电呢？搭电路实验, 结果如下: &lt;/p&gt;
&lt;p&gt;使用自举电路时, 正常启动后, 输入电压可以一直低到1.8V都能正常升压工作; 但输入电压低于4.0V时不能启动. 可见此路不通. &lt;/p&gt;
&lt;p&gt;使用7660倍压时可以在2.8V正常启动, 算是勉强达到要求, 可靠性还是不足. &lt;/p&gt;
&lt;p&gt;可以再试试用BL8530、HT7750之类小功率升压ic为NE555辅助供电, 如果还是不行, 那就得放弃用NE555实现单节锂电升5V的思路了. &lt;/p&gt;</summary><content type="html">&lt;p&gt;之前试验各种升压电路的结论是, 要想实现从单节锂电升压到5V或更高、大电流输出, PWM ic必须具有以下几个性能: &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;工作电压足够低, 一般锂电终止放电电压定在3.0V上下, 因此PWM ic的最低工作电压最好是2.7V或者更低; &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;必须是推挽输出, 否则输出电流不够, MOS开关管要么不能完全导通, 要么不能完全关断, 两种情况都严重影响效率; &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;之前的实验里, NE555在5V升6.3V时表现良好, 但它的最低工作电压只能到4.5V, 不符合上述条件1. 于是想到能否用自举电路或者用7660倍压给NE555供电呢？搭电路实验, 结果如下: &lt;/p&gt;
&lt;p&gt;使用自举电路时, 正常启动后, 输入电压可以一直低到1.8V都能正常升压工作; 但输入电压低于4.0V时不能启动. 可见此路不通. &lt;/p&gt;
&lt;p&gt;使用7660倍压时可以在2.8V正常启动, 算是勉强达到要求, 可靠性还是不足. &lt;/p&gt;
&lt;p&gt;可以再试试用BL8530、HT7750之类小功率升压ic为NE555辅助供电, 如果还是不行, 那就得放弃用NE555实现单节锂电升5V的思路了. &lt;/p&gt;</content></entry><entry><title>用LM2596搭建数控稳压电源</title><link href="http://st.avros.net/articles/lm2596_dac.html" rel="alternate"></link><published>2013-03-23T00:00:00+08:00</published><updated>2013-03-23T00:00:00+08:00</updated><author><name>Stavros</name></author><id>tag:st.avros.net,2013-03-23:/articles/lm2596_dac.html</id><summary type="html">&lt;p&gt;常用的LM2596芯片可以方便地搭成各种降压式开关稳压电源, 但要用单片机来控制它的输出电压就稍微有点麻烦了——主要的思路有两种, 一种是使用传统的电位器控制方式, 用单片机控制数字电位器来代替模拟电位器; 另一种则是利用单片机的PWM或DAC输出一个控制电压, 引入到LM2596的反馈环路中. 这次试验的是后一种思路. &lt;/p&gt;
&lt;p&gt;&lt;a href="/images/lm2596_dac.png" title="电路图"&gt;&lt;img src="/images/lm2596_dac.png" width="500px" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如图, 设输出电压为Vout, 控制电压为Vctrl, LM2596的反馈端电压为Vfb, 根据运放的基本性质可得：&lt;/p&gt;
&lt;p&gt;Vctrl * R3/(R3+R8) + Vfb * R8/(R3+R8) = Vout * R9 / (R2+R9)&lt;/p&gt;
&lt;p&gt;按上图的参数, 可以写为Vctrl * 10/11 + Vfb * 1/11 = Vout * 1/4&lt;/p&gt;
&lt;p&gt;对于LM2596-ADJ, 其Vfb = 1.23V, 于是有Vout = 4/11 * (10 * Vctrl + 1.23 )&lt;/p&gt;
&lt;p&gt;于是, 当Vctrl = 0V时, 输出电压为1 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;常用的LM2596芯片可以方便地搭成各种降压式开关稳压电源, 但要用单片机来控制它的输出电压就稍微有点麻烦了——主要的思路有两种, 一种是使用传统的电位器控制方式, 用单片机控制数字电位器来代替模拟电位器; 另一种则是利用单片机的PWM或DAC输出一个控制电压, 引入到LM2596的反馈环路中. 这次试验的是后一种思路. &lt;/p&gt;
&lt;p&gt;&lt;a href="/images/lm2596_dac.png" title="电路图"&gt;&lt;img src="/images/lm2596_dac.png" width="500px" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如图, 设输出电压为Vout, 控制电压为Vctrl, LM2596的反馈端电压为Vfb, 根据运放的基本性质可得：&lt;/p&gt;
&lt;p&gt;Vctrl * R3/(R3+R8) + Vfb * R8/(R3+R8) = Vout * R9 / (R2+R9)&lt;/p&gt;
&lt;p&gt;按上图的参数, 可以写为Vctrl * 10/11 + Vfb * 1/11 = Vout * 1/4&lt;/p&gt;
&lt;p&gt;对于LM2596-ADJ, 其Vfb = 1.23V, 于是有Vout = 4/11 * (10 * Vctrl + 1.23 )&lt;/p&gt;
&lt;p&gt;于是, 当Vctrl = 0V时, 输出电压为1.23V; 当Vctrl = 3V时, 输出电压为11.3V左右. 实际上由于LM358运放输入共模电压的限制, 当供电电压为12V时, 本电路最高输出电压为10V左右. 在R2和R9的分压端引出一路信号到单片机的ADC来测量输出电压. &lt;/p&gt;
&lt;p&gt;怎么测量输出电流呢？在输出地端串联小电阻检测电流虽然较简单, 但是造成输入、输出不共地, 许多情况下反倒更麻烦, 因此这里选择了由R4、R1、R6、U3和Q1等元件构成的高端电流检测电路. 如图, R4上的压降被U3放大15倍后, 得到一个对地的电压, 单片机测出此电压, 除以15, 再除以R4的阻值50毫欧即可得到输出电流. 用12V 15W灯泡作为负载, 实测工作状况如下：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="center"&gt;PWM duty&lt;/th&gt;
&lt;th align="center"&gt;Vctrl/V&lt;/th&gt;
&lt;th align="center"&gt;Vout/V&lt;/th&gt;
&lt;th align="center"&gt;Iout/A&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="center"&gt;14.6%&lt;/td&gt;
&lt;td align="center"&gt;0.74&lt;/td&gt;
&lt;td align="center"&gt;3.1&lt;/td&gt;
&lt;td align="center"&gt;0.45&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;24.4%&lt;/td&gt;
&lt;td align="center"&gt;1.22&lt;/td&gt;
&lt;td align="center"&gt;4.9&lt;/td&gt;
&lt;td align="center"&gt;0.56&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;34.2%&lt;/td&gt;
&lt;td align="center"&gt;1.70&lt;/td&gt;
&lt;td align="center"&gt;6.6&lt;/td&gt;
&lt;td align="center"&gt;0.65&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;43.9%&lt;/td&gt;
&lt;td align="center"&gt;2.17&lt;/td&gt;
&lt;td align="center"&gt;8.4&lt;/td&gt;
&lt;td align="center"&gt;0.74&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;53.7%&lt;/td&gt;
&lt;td align="center"&gt;2.61&lt;/td&gt;
&lt;td align="center"&gt;10.2&lt;/td&gt;
&lt;td align="center"&gt;0.82&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;后记：用同样原理实现了APW7120+2SK3919*2的可调同步整流降压电路, 实测最大稳定输出电流达到11A. &lt;/p&gt;</content></entry><entry><title>继续进行 NE555 boost 和 flyback 实验</title><link href="http://st.avros.net/articles/ne555_boost_2.html" rel="alternate"></link><published>2011-02-13T00:00:00+08:00</published><updated>2011-02-13T00:00:00+08:00</updated><author><name>Stavros</name></author><id>tag:st.avros.net,2011-02-13:/articles/ne555_boost_2.html</id><summary type="html">&lt;p&gt;之前试过用NE555推MTD3055, 5V升6.3V的实验, 效果很好, 输出1A以上电流, 效率在80%到90%之间. 这次的电路图基本相同, 打算升压到125V左右, 再经过后面的线性稳压, 得到90V左右的稳定电压. 结果不太理想, 5V输入时闭环只能升到85V左右, 12V输入时可以达到130V, 效率50%~60%. 加大负载则效率迅速跌到30%. 从5V逐渐降低输入电压, 降到3.3V时仍能工作, 但带负载时(3W节能灯)不能从3.3V启动工作. 把振荡频率从25kHz提高到50kHz, 效率提高到接近70%, 但没有根本的改善. 再就是变压器的吱吱声实在是太烦人了. &lt;/p&gt;
&lt;p&gt;下次的实验目标：&lt;/p&gt;
&lt;p&gt;1)改用低Rds(on)的MOSFET代替IRFR420, 仍用boost方式, 看能不能稳定实现5V升到110V左右. boost没有噪音的优势还是很明显的. &lt;/p&gt;
&lt;p&gt;2)继续绕变压器, 实现升压到400V, 同时也试试用74HC04、晶体管自激之类实现升压的可能性. &lt;/p&gt;
&lt;p&gt;电路图:&lt;/p&gt;
&lt;p&gt;&lt;a href="/images/ne555_flyback_2.png" title="电路图"&gt;&lt;img src="/images/ne555_flyback_2.png" width="500px" /&gt;&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;之前试过用NE555推MTD3055, 5V升6.3V的实验, 效果很好, 输出1A以上电流, 效率在80%到90%之间. 这次的电路图基本相同, 打算升压到125V左右, 再经过后面的线性稳压, 得到90V左右的稳定电压. 结果不太理想, 5V输入时闭环只能升到85V左右, 12V输入时可以达到130V, 效率50%~60%. 加大负载则效率迅速跌到30%. 从5V逐渐降低输入电压, 降到3.3V时仍能工作, 但带负载时(3W节能灯)不能从3.3V启动工作. 把振荡频率从25kHz提高到50kHz, 效率提高到接近70%, 但没有根本的改善. 再就是变压器的吱吱声实在是太烦人了. &lt;/p&gt;
&lt;p&gt;下次的实验目标：&lt;/p&gt;
&lt;p&gt;1)改用低Rds(on)的MOSFET代替IRFR420, 仍用boost方式, 看能不能稳定实现5V升到110V左右. boost没有噪音的优势还是很明显的. &lt;/p&gt;
&lt;p&gt;2)继续绕变压器, 实现升压到400V, 同时也试试用74HC04、晶体管自激之类实现升压的可能性. &lt;/p&gt;
&lt;p&gt;电路图:&lt;/p&gt;
&lt;p&gt;&lt;a href="/images/ne555_flyback_2.png" title="电路图"&gt;&lt;img src="/images/ne555_flyback_2.png" width="500px" /&gt;&lt;/a&gt;&lt;/p&gt;</content></entry><entry><title>又试了一下用NE555做boost</title><link href="http://st.avros.net/articles/ne555_boost.html" rel="alternate"></link><published>2010-04-13T00:00:00+08:00</published><updated>2010-04-13T00:00:00+08:00</updated><author><name>Stavros</name></author><id>tag:st.avros.net,2010-04-13:/articles/ne555_boost.html</id><summary type="html">&lt;p&gt;555搭成多谐振荡器推动MOSFET，用C1815当作比较器，输入5V，输出6.3V左右，试着点了几个电子管的灯丝。
结果如下：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="center"&gt;&lt;/th&gt;
&lt;th align="center"&gt;输出电压(V)&lt;/th&gt;
&lt;th align="center"&gt;标称电流(A)&lt;/th&gt;
&lt;th align="center"&gt;输出电流(A)&lt;/th&gt;
&lt;th align="center"&gt;输入电流(A)&lt;/th&gt;
&lt;th align="center"&gt;效率&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="center"&gt;空载&lt;/td&gt;
&lt;td align="center"&gt;6.76&lt;/td&gt;
&lt;td align="center"&gt;-&lt;/td&gt;
&lt;td align="center"&gt;-&lt;/td&gt;
&lt;td align="center"&gt;-&lt;/td&gt;
&lt;td align="center"&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;6U1&lt;/td&gt;
&lt;td align="center"&gt;6.20&lt;/td&gt;
&lt;td align="center"&gt;0.30&lt;/td&gt;
&lt;td align="center"&gt;0.32&lt;/td&gt;
&lt;td align="center"&gt;0.46&lt;/td&gt;
&lt;td align="center"&gt;86%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;6N2&lt;/td&gt;
&lt;td align="center"&gt;6.19&lt;/td&gt;
&lt;td align="center"&gt;0.34&lt;/td&gt;
&lt;td align="center"&gt;0.33&lt;/td&gt;
&lt;td align="center"&gt;0.48&lt;/td&gt;
&lt;td align="center"&gt;85%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;6F2&lt;/td&gt;
&lt;td align="center"&gt;6.17&lt;/td&gt;
&lt;td align="center"&gt;0.45&lt;/td&gt;
&lt;td align="center"&gt;0.43&lt;/td&gt;
&lt;td align="center"&gt;0.61&lt;/td&gt;
&lt;td align="center"&gt;87%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;6P1 …&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;</summary><content type="html">&lt;p&gt;555搭成多谐振荡器推动MOSFET，用C1815当作比较器，输入5V，输出6.3V左右，试着点了几个电子管的灯丝。
结果如下：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="center"&gt;&lt;/th&gt;
&lt;th align="center"&gt;输出电压(V)&lt;/th&gt;
&lt;th align="center"&gt;标称电流(A)&lt;/th&gt;
&lt;th align="center"&gt;输出电流(A)&lt;/th&gt;
&lt;th align="center"&gt;输入电流(A)&lt;/th&gt;
&lt;th align="center"&gt;效率&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="center"&gt;空载&lt;/td&gt;
&lt;td align="center"&gt;6.76&lt;/td&gt;
&lt;td align="center"&gt;-&lt;/td&gt;
&lt;td align="center"&gt;-&lt;/td&gt;
&lt;td align="center"&gt;-&lt;/td&gt;
&lt;td align="center"&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;6U1&lt;/td&gt;
&lt;td align="center"&gt;6.20&lt;/td&gt;
&lt;td align="center"&gt;0.30&lt;/td&gt;
&lt;td align="center"&gt;0.32&lt;/td&gt;
&lt;td align="center"&gt;0.46&lt;/td&gt;
&lt;td align="center"&gt;86%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;6N2&lt;/td&gt;
&lt;td align="center"&gt;6.19&lt;/td&gt;
&lt;td align="center"&gt;0.34&lt;/td&gt;
&lt;td align="center"&gt;0.33&lt;/td&gt;
&lt;td align="center"&gt;0.48&lt;/td&gt;
&lt;td align="center"&gt;85%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;6F2&lt;/td&gt;
&lt;td align="center"&gt;6.17&lt;/td&gt;
&lt;td align="center"&gt;0.45&lt;/td&gt;
&lt;td align="center"&gt;0.43&lt;/td&gt;
&lt;td align="center"&gt;0.61&lt;/td&gt;
&lt;td align="center"&gt;87%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;6P1&lt;/td&gt;
&lt;td align="center"&gt;6.15&lt;/td&gt;
&lt;td align="center"&gt;0.50&lt;/td&gt;
&lt;td align="center"&gt;0.50&lt;/td&gt;
&lt;td align="center"&gt;0.73&lt;/td&gt;
&lt;td align="center"&gt;84%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;6N1&lt;/td&gt;
&lt;td align="center"&gt;6.12&lt;/td&gt;
&lt;td align="center"&gt;0.60&lt;/td&gt;
&lt;td align="center"&gt;0.61&lt;/td&gt;
&lt;td align="center"&gt;0.89&lt;/td&gt;
&lt;td align="center"&gt;84%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;6P15&lt;/td&gt;
&lt;td align="center"&gt;6.05&lt;/td&gt;
&lt;td align="center"&gt;0.76&lt;/td&gt;
&lt;td align="center"&gt;0.75&lt;/td&gt;
&lt;td align="center"&gt;1.11&lt;/td&gt;
&lt;td align="center"&gt;82%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;6F3&lt;/td&gt;
&lt;td align="center"&gt;6.02&lt;/td&gt;
&lt;td align="center"&gt;0.90&lt;/td&gt;
&lt;td align="center"&gt;0.92&lt;/td&gt;
&lt;td align="center"&gt;1.40&lt;/td&gt;
&lt;td align="center"&gt;79%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;素质相当高了，比34063强不少。以前用34063点6N3的灯丝，也是从5V升6.3V，效率只有60%多的样子。&lt;/p&gt;</content></entry><entry><title>车载充电器</title><link href="http://st.avros.net/articles/auto_charger.html" rel="alternate"></link><published>2010-01-18T00:00:00+08:00</published><updated>2010-01-18T00:00:00+08:00</updated><author><name>Stavros</name></author><id>tag:st.avros.net,2010-01-18:/articles/auto_charger.html</id><summary type="html">&lt;p&gt;用LM2596T的标准电路搭了个12V输入/5V输出的降压变换器. 因为听说有人的点烟器座里面居然把正负极接反了, 充电器一插上就冒烟, 于是保险起见在2596的前面加了个整流桥.&lt;/p&gt;
&lt;p&gt;整流二极管用B540C, 电感是在20mm磁环上绕了5T, 用LC表测了一下有40多uH, 够用了.&lt;/p&gt;
&lt;p&gt;负载电阻用5.1欧 1/2瓦电阻. 这个电阻功率明显不够, 于是用长线把它接出来放进水盆里, 应该安全了.&lt;/p&gt;
&lt;p&gt;一个负载电阻时, 输出电压5.00V, 电流0.98A, 输入电压12.0V, 电流0.55A. 两个电阻时输出5.00V 1.96A, 输入电流达到了1.12A.&lt;/p&gt;
&lt;p&gt;测了一下2596输入端的电压居然只有10V多一点了, 看来桥还是挺影响效率的, 以后得换个肖特基桥.&lt;/p&gt;
&lt;p&gt;按说2596的最大输出电流能达到3A, 但是不知道为什么, 三个电阻时电路就保护了, 试了几次都一样. 幸好2A也够用了.&lt;/p&gt;</summary><content type="html">&lt;p&gt;用LM2596T的标准电路搭了个12V输入/5V输出的降压变换器. 因为听说有人的点烟器座里面居然把正负极接反了, 充电器一插上就冒烟, 于是保险起见在2596的前面加了个整流桥.&lt;/p&gt;
&lt;p&gt;整流二极管用B540C, 电感是在20mm磁环上绕了5T, 用LC表测了一下有40多uH, 够用了.&lt;/p&gt;
&lt;p&gt;负载电阻用5.1欧 1/2瓦电阻. 这个电阻功率明显不够, 于是用长线把它接出来放进水盆里, 应该安全了.&lt;/p&gt;
&lt;p&gt;一个负载电阻时, 输出电压5.00V, 电流0.98A, 输入电压12.0V, 电流0.55A. 两个电阻时输出5.00V 1.96A, 输入电流达到了1.12A.&lt;/p&gt;
&lt;p&gt;测了一下2596输入端的电压居然只有10V多一点了, 看来桥还是挺影响效率的, 以后得换个肖特基桥.&lt;/p&gt;
&lt;p&gt;按说2596的最大输出电流能达到3A, 但是不知道为什么, 三个电阻时电路就保护了, 试了几次都一样. 幸好2A也够用了.&lt;/p&gt;</content></entry><entry><title>34063扩流实验的一些结果</title><link href="http://st.avros.net/articles/34063_ext_1.html" rel="alternate"></link><published>2009-12-30T00:00:00+08:00</published><updated>2009-12-30T00:00:00+08:00</updated><author><name>Stavros</name></author><id>tag:st.avros.net,2009-12-30:/articles/34063_ext_1.html</id><summary type="html">&lt;p&gt;34063做buck的效率是相当低的, 手册上给出的83.7%的效率是在输入25V, 输出5V的条件下测到的. 以前我自己实验的结果是, 输入12V, 输出6V左右时效率只有60%多, 比线性稳压高不了多少. 因为是用达林顿管接成OC或OE开关, 没法直接驱动外接MOSFET.&lt;/p&gt;
&lt;p&gt;fdisk手里的一个路由器板, 3.3V供电是从5V buck降压得到的, 而且居然是用的34063. 5V降到3.3V如果用的是LDO, 那么效率就是66%, 可见这里效率一定远比66%高；于是和fdisk, sunzx一起把这部分电路抄了下来.&lt;/p&gt;
&lt;p&gt;基本原理: 34063内部开关管导通时, Q1关断, PFET栅极通过二极管D1被拉低导通；34063内部开关管关断时, Q1导通, PFET栅极拉高关断. 从而实现了利用外置MOSFET扩流. sunzx紧接着找到一个类似原理的boost升压电路, 换成了PNP管和NFET.&lt;/p&gt;
&lt;p&gt;照这两个电路接了一下, buck电路使用2SC945和MTD2955, 结果是输入5V 0.24A,  输出3.2V 0.29A,  效率大约77%;boost电路使用2SA733和MTD3055, 12V升29V效率只有52%了, 输入电压5V时则不能工作；换用导通电压很低的IRLML2502, 还是不能工作 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;34063做buck的效率是相当低的, 手册上给出的83.7%的效率是在输入25V, 输出5V的条件下测到的. 以前我自己实验的结果是, 输入12V, 输出6V左右时效率只有60%多, 比线性稳压高不了多少. 因为是用达林顿管接成OC或OE开关, 没法直接驱动外接MOSFET.&lt;/p&gt;
&lt;p&gt;fdisk手里的一个路由器板, 3.3V供电是从5V buck降压得到的, 而且居然是用的34063. 5V降到3.3V如果用的是LDO, 那么效率就是66%, 可见这里效率一定远比66%高；于是和fdisk, sunzx一起把这部分电路抄了下来.&lt;/p&gt;
&lt;p&gt;基本原理: 34063内部开关管导通时, Q1关断, PFET栅极通过二极管D1被拉低导通；34063内部开关管关断时, Q1导通, PFET栅极拉高关断. 从而实现了利用外置MOSFET扩流. sunzx紧接着找到一个类似原理的boost升压电路, 换成了PNP管和NFET.&lt;/p&gt;
&lt;p&gt;照这两个电路接了一下, buck电路使用2SC945和MTD2955, 结果是输入5V 0.24A,  输出3.2V 0.29A,  效率大约77%;boost电路使用2SA733和MTD3055, 12V升29V效率只有52%了, 输入电压5V时则不能工作；换用导通电压很低的IRLML2502, 还是不能工作, 从示波器上看栅极波形, 根本不能关断. 两个电路的结果都不理想.&lt;/p&gt;
&lt;p&gt;大概分析了一下: 主要的问题应该在MTD2955和3055这两个管子上. 在VGS=10V时, 两者的RDS(on)分别是0.23Ω和0.18Ω, 相比之下, fdisk路由器板上使用的MMSF7P03, RDS(on)只有35mΩ. 这个buck电路改用低导通电阻的管子应该会好些. 至于boost电路, 在输入电压较低时, 34063内部开关管和二极管D4上的压降使得MTD3055还不能完全导通；换用IRLML2502之后, 它的导通电压低了, 但是不能饱和导通的Q4使得IRLML2502没法关断. 因此这个boost电路在输入电压较低(3.3V到5V)时不能用, 而输入电压再高些的时候则有性能高得多的UC3843可用, 看来它的实用价值不大了.&lt;/p&gt;
&lt;p&gt;下一步考虑换个低导通电阻的MOSFET比如AO4419, 再试一下buck电路的性能, 应该还是有潜力的.&lt;/p&gt;</content></entry><entry><title>继续试验升压开关电源</title><link href="http://st.avros.net/articles/step_up_expr_2.html" rel="alternate"></link><published>2009-08-19T00:00:00+08:00</published><updated>2009-08-19T00:00:00+08:00</updated><author><name>Stavros</name></author><id>tag:st.avros.net,2009-08-19:/articles/step_up_expr_2.html</id><summary type="html">&lt;p&gt;用UC3843搭flyback实现了输入18V,  输出220V左右点亮25W灯泡.  变压器使用EE25.4磁心.&lt;/p&gt;
&lt;p&gt;用MAX1771轻易实现单节18650升压输出5V 1A,  估计有输出5V 2A的潜力. Maxim的东西到底靠谱.&lt;/p&gt;
&lt;p&gt;LM2577搭flyback实现单节14500锂电升压输出60V,  输出6-13mA时效率大约在50%上下, 一般般吧. 同时线性降压输出1.2V.&lt;/p&gt;
&lt;p&gt;BL8530、PT1301等从1AA升到5V有点力不从心, 感觉还是从1AA升到2.5V/3.3V,  从2AA或单锂电升到5V比较合适.&lt;/p&gt;</summary><content type="html">&lt;p&gt;用UC3843搭flyback实现了输入18V,  输出220V左右点亮25W灯泡.  变压器使用EE25.4磁心.&lt;/p&gt;
&lt;p&gt;用MAX1771轻易实现单节18650升压输出5V 1A,  估计有输出5V 2A的潜力. Maxim的东西到底靠谱.&lt;/p&gt;
&lt;p&gt;LM2577搭flyback实现单节14500锂电升压输出60V,  输出6-13mA时效率大约在50%上下, 一般般吧. 同时线性降压输出1.2V.&lt;/p&gt;
&lt;p&gt;BL8530、PT1301等从1AA升到5V有点力不从心, 感觉还是从1AA升到2.5V/3.3V,  从2AA或单锂电升到5V比较合适.&lt;/p&gt;</content></entry><entry><title>最近试验各种升压电路的一些结果</title><link href="http://st.avros.net/articles/step_up_expr.html" rel="alternate"></link><published>2009-05-10T00:00:00+08:00</published><updated>2009-05-10T00:00:00+08:00</updated><author><name>Stavros</name></author><id>tag:st.avros.net,2009-05-10:/articles/step_up_expr.html</id><summary type="html">&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;MC34063:
    限制最高升到40V, 实际试验可以升到60V左右. 外接2N5551大约能升至85V (输入电压12V), 只能输出10mA左右的电流. 由于占空比的限制, 很难升到更高了.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;NE555+IRFR420:
    输入12V, 输出空载时可升到220V以上, 但接上负载后输出电压就急剧跌落. 用220V 5W灯泡作负载时, 大约能输出110V左右; 将输入电压提高到24V时能得到输出160V 30mA的结果, 效率50%左右.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;UC3843+IRF740:
    与NE555+IRFR420的结果基本相同, 输出稍硬一些.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;级联UC3843 boost:
    前级将18V升压至55V, 后级从55V升压至约210V. 用5W灯泡能稳定输出210V, 加大负载后电压跌落, 最好成绩是将输入电压提高到24V后, 输出150V/90mA, 不过效率只有大概56%.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;总结: 似乎使用简单的boost很难做到输出200V/100mA以上, 还是得用反激、半桥或者全桥变换器才行。下一步先用MC34063接成反激式，用一个小磁环试试看，如果好用再换LM2577+E字磁芯。&lt;/p&gt;
&lt;p&gt;ps, 用LM2596接成inverter时，启动瞬间需要4.5A的电流，所以延迟启动一定不能省，并且需要较大的输入电容 …&lt;/p&gt;</summary><content type="html">&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;MC34063:
    限制最高升到40V, 实际试验可以升到60V左右. 外接2N5551大约能升至85V (输入电压12V), 只能输出10mA左右的电流. 由于占空比的限制, 很难升到更高了.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;NE555+IRFR420:
    输入12V, 输出空载时可升到220V以上, 但接上负载后输出电压就急剧跌落. 用220V 5W灯泡作负载时, 大约能输出110V左右; 将输入电压提高到24V时能得到输出160V 30mA的结果, 效率50%左右.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;UC3843+IRF740:
    与NE555+IRFR420的结果基本相同, 输出稍硬一些.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;级联UC3843 boost:
    前级将18V升压至55V, 后级从55V升压至约210V. 用5W灯泡能稳定输出210V, 加大负载后电压跌落, 最好成绩是将输入电压提高到24V后, 输出150V/90mA, 不过效率只有大概56%.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;总结: 似乎使用简单的boost很难做到输出200V/100mA以上, 还是得用反激、半桥或者全桥变换器才行。下一步先用MC34063接成反激式，用一个小磁环试试看，如果好用再换LM2577+E字磁芯。&lt;/p&gt;
&lt;p&gt;ps, 用LM2596接成inverter时，启动瞬间需要4.5A的电流，所以延迟启动一定不能省，并且需要较大的输入电容。&lt;/p&gt;
&lt;p&gt;用MC34063做inverter的效率则相当低，输入12V，输出-9V时大概只有50%的效率。看来要得到正负电压还是用反激式容易些。&lt;/p&gt;</content></entry></feed>